<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
		<meta http-equiv="Content-Style-Type" content="text/css"/>
		<meta http-equiv="pragma" content="no-cache"/>
		<meta http-equiv="Expires" content="Thu, 01 Dec 1994 120000 GMT"/>
		<link type="text/css" rel="stylesheet" media="all" href="../demo.css"/>
		<title>SOS Client</title>

		<script type="text/javascript">
		<!--
			function wrapInProxy(url) {
				var purl = '/ms-ogc-workshop/util/proxy.php?url=';
				if (url) {
					purl += url;
				}
				return purl;
			}

			function createRequest(url) {
				var request;
				if (url) {
					var response = http_get(url);
					request = response.responseText;
				}
				document.forms[0].request.value = request;
			}

			function sosRequest(url,request) {
				var response = http_post(wrapInProxy(url),request);
				document.forms[0].response.value=response.responseText;
			}

			function http_get(url) {
				var httpRequest;
				try {
					try {
						httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
					}
					catch (e) {
						httpRequest = new XMLHttpRequest();
					}
					httpRequest.open('GET', url, false);
					httpRequest.send(null);
					return httpRequest;
				}
				catch (e) {
					alert("Can't get XML document.");
					return null;
				}
			}

			function http_post(url, request) {
				var httpRequest;
				try {
					try {
						httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
					}
					catch (e) {
						httpRequest = new XMLHttpRequest();
					}
					httpRequest.open('POST', url, false);
					httpRequest.send(request);
					return httpRequest;
				}
				catch (e) {
					alert("Can't post XML document.");
					return null;
				}
			}
		//-->
		</script>
	</head>
	<body>
		<h2>SOS Client</h2>
		<hr/>
		<p>
			This is a simple client to demonstrate the functionality of the <a href="http://mapserver.osgeo.org/ogc/sos_server.html" title="MapServer SOS Server">MapServer SOS Server</a> implementation.  The <a href="/cgi-bin/mapserv.exe?map=/ms4w/apps/ms-ogc-workshop/sos/config.map&amp;service=SOS&amp;version=1.0.0&amp;request=GetCapabilities" title="service">service</a> itself accepts HTTP GET and HTTP XML Post for Transform requests.  So the XML document is the actual request, as opposed to the value of a keyword in typical HTML form POST scenarios.
		</p>

			<ul>
				<li><a href="javascript:createRequest('./GetCapabilities.xml');" title="GetCapabilities">GetCapabilities</a></li>
				<li><a href="javascript:createRequest('./DescribeSensor.xml');" title="DescribeSensor">DescribeSensor</a></li>
				<li><a href="javascript:createRequest('./GetObservation-default.xml');" title="GetObservation (default)">GetObservation (default)</a></li>
				<li><a href="javascript:createRequest('./GetObservation-DataBlock.xml');" title="GetObservation (DataBlock)">GetObservation (DataBlock)</a></li>
				<li><a href="javascript:createRequest('./GetObservation-procedure.xml');" title="GetObservation (procedure)">GetObservation (procedure)</a></li>

			</ul>
		<hr/>
		<form action="javascript:void();" method="post" enctype="application/x-www-form-urlencoded">
			<table>
				<tr>
					<th>Server:</th>
					<td><input type="text" name="url" size="60" value="http://localhost/cgi-bin/mapserv.exe?map=/ms4w/apps/ms-ogc-workshop/sos/config.map"/></td>
				</tr>

				<tr>
					<th>Request:</th>
					<td><textarea rows="15" cols="70" name="request"></textarea></td>
				</tr>
				<tr>
					<th></th>
					<td><input class="button" type="button" value="Send" onclick="javascript:sosRequest(document.forms[0].url.value,document.forms[0].request.value);"/></td>
				</tr>

				<tr>
					<th>Response:</th>
					<td><textarea rows="15" cols="70" name="response"></textarea></td>
				</tr>
				<tr>
					<th></th>
					<td><input class="button" type="reset"/></td>
				</tr>

			</table>
		</form>
		<hr/>
                <p>
                        <a href="http://validator.w3.org/check?verbose=1&amp;uri=referer" title="[ Valid XHTML 1.0! ]"><img class="flat" src="http://www.w3.org/Icons/valid-xhtml10" alt="[ Valid XHTML 1.0! ]" height="31" width="88"/></a>
                        <a href="http://jigsaw.w3.org/css-validator/check/referer" title="[ Valid CSS! ]"><img class="flat" src="http://jigsaw.w3.org/css-validator/images/vcss" alt="[ Valid CSS! ]" height="31" width="88"/></a>
                </p>
        </body>
</html>

